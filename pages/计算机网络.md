---
title: 计算机网络
---

## 1.OSI七层（或其他）参考模型
## ![2021_05_28_image.png](https://cdn.logseq.com/%2F1e5b0e5f-d368-4a5d-86eb-09a690ee15d7d0d6e7a0-0d12-4612-bb2f-15aee417044f2021_05_28_image.png?Expires=4775767112&Signature=RYnXru6JccQ6RYv4bO5x4hCfugIiHwy9u6YMnbs40gFMKY~FLLW9HH3E~K-kZrUM6oZ1DwkB3d87ktlfeHnj0cEuZeXZwuotE90bxzwSqR5FkWIHv1esFn2tf99cESw67fY6TVzsUzN7zoFqtYi3NqsRfP~6e72GNWHs7UN-zRBxWUHS7pSrJ9ZAm39rvXBW66Vcsdm2aEvwFefyto-YpH6TP3f7BaGVFZxdtBkkYAaQX4LRT7K0Ky8uwE7EFugAsOJFBRSZjZYpaLAnxZRfGp~-bG~yeHqxC0kn3Ntl3pN3Dal4ei3GGJkEZoVSow4c5islR~Hmi324fKrQzB8Pmw__&Key-Pair-Id=APKAJE5CCD6X7MP6PTEA)
## OSI 模型全称为开放式通信系统互连参考模型，是国际标准化组织 ( ISO ) 提出的一个试图使各种计算机在世界范围内互连为网络的标准框架。 OSI 将计算机网络体系结构划分为七层，每一层实现各自的功能和协议，并完成与相邻层的接口通信。OSI 的服务定义详细说明了各层所提供的服务。某一层的服务就是该层及其下各层的一种能力，它通过接口提供给更高一层。各层所提供的服务与这些服务是怎么实现的无关。
① 应用层

应用层位于 OSI 参考模型的第七层，其作用是通过应用程序间的交互来完成特定的网络应用。该层协议定义了应用进程之间的交互规则，通过不同的应用层协议为不同的网络应用提供服务。例如域名系统 DNS，支持万维网应用的 HTTP 协议，电子邮件系统采用的 SMTP 协议等。在应用层交互的数据单元我们称之为报文。
② 表示层

表示层的作用是使通信的应用程序能够解释交换数据的含义，其位于 OSI 参考模型的第六层，向上为应用层提供服务，向下接收来自会话层的服务。该层提供的服务主要包括数据压缩，数据加密以及数据描述。这使得应用程序不必担心在各台计算机中表示和存储的内部格式差异。

③ 会话层

会话层就是负责建立、管理和终止表示层实体之间的通信会话。该层提供了数据交换的定界和同步功能，包括了建立检查点和恢复方案的方法。

④ 传输层

传输层的主要任务是为两台主机进程之间的通信提供服务。应用程序利用该服务传送应用层报文。该服务并不针对某一特定的应用，多种应用可以使用同一个传输层服务。由于一台主机可同时运行多个线程，因此传输层有复用和分用的功能。所谓复用就是指多个应用层进程可同时使用下面传输层的服务，分用和复用相反，是传输层把收到的信息分别交付上面应用层中的相应进程。

⑤ 网络层

两台计算机之间传送数据时其通信链路往往不止一条，所传输的信息甚至可能经过很多通信子网。网络层的主要任务就是选择合适的网间路由和交换节点，确保数据按时成功传送。在发送数据时，网络层把传输层产生的报文或用户数据报封装成分组和包向下传输到数据链路层。在网络层使用的协议是无连接的网际协议（Internet Protocol）和许多路由协议，因此我们通常把该层简单地称为 IP 层。

⑥ 数据链路层

数据链路层通常也叫做链路层，在物理层和网络层之间。两台主机之间的数据传输，总是在一段一段的链路上传送的，这就需要使用专门的链路层协议。在两个相邻节点之间传送数据时，数据链路层将网络层交下来的 IP 数据报组装成帧，在两个相邻节点间的链路上传送帧。每一帧包括数据和必要的控制信息。通过控制信息我们可以知道一个帧的起止比特位置，此外，也能使接收端检测出所收到的帧有无差错，如果发现差错，数据链路层能够简单的丢弃掉这个帧，以避免继续占用网络资源。

⑦ 物理层

作为 OSI 参考模型中最低的一层，物理层的作用是实现计算机节点之间比特流的透明传送，尽可能屏蔽掉具体传输介质和物理设备的差异。使其上面的数据链路层不必考虑网络的具体传输介质是什么。该层的主要任务是确定与传输媒体的接口的一些特性（机械特性、电气特性、功能特性，过程特性）。
## 2.TCP/IP参考模型
## ​ OSI 七层模型在提出时的出发点是基于标准化的考虑，而没有考虑到具体的市场需求，使得该模型结构复杂，部分功能冗余，因而完全实现 OSI 参考模型的系统不多。而 TCP/IP 参考模型直接面向市场需求，实现起来也比较容易，因此在一经提出便得到了广泛的应用。基于 TCP/IP 的参考模型将协议分成四个层次，如上图所示，它们分别是：网络访问层、网际互联层、传输层、和应用层。

① 应用层

TCP/IP 模型将 OSI 参考模型中的会话层、表示层和应用层的功能合并到一个应用层实现，通过不同的应用层协议为不同的应用提供服务。例如：FTP、Telnet、DNS、SMTP 等。

② 传输层

该层对应于 OSI 参考模型的传输层，为上层实体提供源端到对端主机的通信功能。传输层定义了两个主要协议：传输控制协议（TCP）和用户数据报协议（UDP）。其中面向连接的 TCP 协议保证了数据的传输可靠性，面向无连接的 UDP 协议能够实现数据包简单、快速地传输。

③ 网际互联层

网际互联层对应 OSI 参考模型的网络层，主要负责相同或不同网络中计算机之间的通信。在网际互联层， IP 协议提供的是一个不可靠、无连接的数据报传递服务。该协议实现两个基本功能：寻址和分段。根据数据报报头中的目的地址将数据传送到目的地址，在这个过程中 IP 负责选择传送路线。除了 IP 协议外，该层另外两个主要协议是互联网组管理协议（IGMP）和互联网控制报文协议（ICMP）。

④ 网络接入层

网络接入层的功能对应于 OSI 参考模型中的物理层和数据链路层，它负责监视数据在主机和网络之间的交换。事实上，TCP/IP 并未真正描述这一层的实现，而由参与互连的各网络使用自己的物理层和数据链路层协议，然后与 TCP/IP 的网络接入层进行连接，因此具体的实现方法将随着网络类型的不同而有所差异。
![2021_05_28_image.png](https://cdn.logseq.com/%2F1e5b0e5f-d368-4a5d-86eb-09a690ee15d758345f0c-fa81-4885-8777-d6f48c3749bd2021_05_28_image.png?Expires=4775767842&Signature=OA96UtbH59LuksPyHOMhUD3yLSLCAjqqxJBIiCjAC0qHrs8nNy-tswJhOHnt5XsbzjzNoFmznlYM8s1ulGcVj2LDqYycGkvKevUfVPQEyOEOA8mgXkNchg~qfEH1wBhR-RMQzMbV2boKdyf0e4qPRjmdGyMpVoNKcDZBIdlO~IviF0px3~nWXvq59kRNsDMvdv6HL14gfnN18Ri1dFtzG9RAS0EYNypXr~TOx5lRtSNOjrF68uExsYye7Fis2Xsp3BxlelE5cQHZ7CygjIoA8~A7J8y11wOrHIjiUcwCw5iWs7mLGchISXG~CzGiTlv~7LpNkkTnnwceSzwsZUw2cQ__&Key-Pair-Id=APKAJE5CCD6X7MP6PTEA) 
**为什么 TCP/IP 去除了表示层和会话层？**
## OSI 参考模型在提出时，他们的理想是非常好的，但实际上，由于会话层、表示层、应用层都是在应用程序内部实现的，最终产出的是一个应用数据包，而应用程序之间是几乎无法实现代码的抽象共享的，这也就造成 OSI 设想中的应用程序维度的分层是无法实现的，例如，我们几乎不会认为数据的压缩、加密算法算是一种协议，而会话的概念则更为抽象，难以用协议来进行描述，所以在后来的 TCP/IP 协议框架的设计中，便将表示层和会话层与应用层整合在一起，让整个过程更为清晰明了。
**数据如何在各层之间传输【数据的封装过程】**
## 在发送主机端，一个应用层报文被传送到运输层。在最简单的情况下，运输层收取到报文并附上附加信息，该首部将被接收端的运输层使用。应用层报文和运输层首部信息一道构成了运输层报文段。附加的信息可能包括：**允许接收端运输层向上向适当的应用程序交付报文的信息以及差错检测位信息。**该信息让接收端能够判断报文中的比特是否在途中已被改变。运输层则向网络层传递该报文段，**网络层增加了如源和目的端系统地址等网络层首部信息**，生成了网络层数据报。该数据报接下来被传递给链路层，在**数据链路层数据包添加发送端 MAC 地址和接收端 MAC 地址后被封装成数据帧**，在物理层数据帧被封装成比特流，之后通过传输介质传送到对端。
## 3.应用层
## 3.1 HTTP 头部包含哪些信息
    HTTP 头部本质上是一个传递额外重要信息的键值对。主要分为：通用头部，请求头部，响应头部和实体头部。
## ![2021_05_28_image.png](https://cdn.logseq.com/%2F1e5b0e5f-d368-4a5d-86eb-09a690ee15d7dc6310b0-a304-411b-a2bd-09cf7ad8bca72021_05_28_image.png?Expires=4775768572&Signature=FbG1I6yjbBw3PfAg1LknVfwT1Gf50kwwv13qG-bfa0l7DLei8LEe4MVl6dTxZy4rM~NRH~IV40~gzgY3qvva9FovTXaVcmxyK1eDswKnJBA9TqNL4gH0~SJb0Bto-buQSvQ-2-YmeIOy-jGjpIDtT7W03gC7CLtvmAYb4Ifons7aiCBibYuXS1g6qpYhgZU~j71QLwP-oHFYfnU-4XTljqbsIquzBN5BIuWTiqa~qR6d9CO81yth-T1C6Nr7Uo4TB3Kx5-gFhXTjYAG9NzzWwyueUy~pBWTkMzCPTgxh80YkLJ3ADsrvAtVv6v47mJmfJqR4SabtWxEaTS5Ll4xyaA__&Key-Pair-Id=APKAJE5CCD6X7MP6PTEA)
## ![2021_05_28_image.png](https://cdn.logseq.com/%2F1e5b0e5f-d368-4a5d-86eb-09a690ee15d7898abeae-d15d-4d46-8cad-a302c29e09be2021_05_28_image.png?Expires=4775768614&Signature=e~kzY62vgGWpPJ9MaT-wmzrUNzYMGdgeULYhLSpCJtsjJjPG-q2z8x3xmso0C3JRExFPdqYMsIDcP60blVAKBkop8kaR03AGxkMkbNACrU7AD1ka6BDTRZiM1fvGqAQ24McPEO4irxU2ShiuzA3yUMFf2TyCT1S3HnM5FtWkiuRHjqv7l7oYon~wCl9Y78FRVDO-cncxLZkXT2YCu6ye~xyGj5kwDxqZsy~t1DLH3L5jGvAASeplwIym3N8pVW2tlJtW0jcCod2Xa8dU~Wn2gUzEgvy8nt3RAO-DniyO3meYrZZThO6EzWfuo3bP7frLaOF6~peuAErAM-u85AWakA__&Key-Pair-Id=APKAJE5CCD6X7MP6PTEA)
## ![2021_05_28_image.png](https://cdn.logseq.com/%2F1e5b0e5f-d368-4a5d-86eb-09a690ee15d7debdda86-84c3-4b4d-9079-5b027fb6d6542021_05_28_image.png?Expires=4775768634&Signature=RE-76a5ZJ9WOoARVBrhcAH0WxOVy~xYqMzqvLxmz8cQe4DYsEgp-pqCPMdHSi6IKgDum1-pGMUORFh5YGL2k9SFlk8kXSrpNaOzksrzPfGPLh6Cq6WaVxYCMCZjAsJAItuVz0~7MMUt4UQP7clIM0INFtpFBJ61~ubuR-V0Tgyp-0WLgqy2~wjpu-LczzifGf~DZPTm0waExmvyH11i88BSmjr3CwtuDKjC1vrsOcPajRtDKqQwA2~9XEkdYsivjqhQnWN4r17sNfxg8zE3HoVlK56XTgYpzwHaNtpUBlh8FCyUs0jw~WDJC~bvGN3m5HrPIprtYULPqFqOEVOB5zw__&Key-Pair-Id=APKAJE5CCD6X7MP6PTEA)
## ![2021_05_28_image.png](https://cdn.logseq.com/%2F1e5b0e5f-d368-4a5d-86eb-09a690ee15d7ae439ad3-9b94-437c-9e00-4cb885443c9d2021_05_28_image.png?Expires=4775768649&Signature=DF3IJ9rqDZwB4Fe3XDSi4Ysn3831NDo6UGyzCavWqfh7PMZPO~YYDRxqbN30k57H-d2c6z9MwCFObvqDJMdIbsV0HK4FXolqrPk9PHXjCJ0vZ0C20pJtpVde-LTbgZplZJny1Ihsed54Vhcn-hImf7ZTGSE-PD-Pc0tjQ2ZKwTWTDqPx~q24UHF679tV~O8WGwH7T9b7Vp~u5FiMAYwaXf~bafJ~cZsI5OhRKUyZE5OZO~a8O-NWzpSbOlByJWtN7D-fjuaLWO2h6PI5~7UVe-HACkfb579wU9PEhim~yqI7KPgsKpZK~Nic~Awyuy7OVaLqAbnWt~jC8vvL~y~B2g__&Key-Pair-Id=APKAJE5CCD6X7MP6PTEA)
## 总结：
## *通用头*：是客户端和服务器都可以使用的头部，可以在客户端、服务器和其他应用程序之间提供一些非常有用的通用功能，如Date头部。
*请求头*：是请求报文特有的，它们为服务器提供了一些额外信息，比如客户端希望接收什么类型的数据，如Accept头部。
*响应头*：便于客户端提供信息，比如，客服端在与哪种类型的服务器进行交互，如Server头部。
*实体头*：指的是用于应对实体主体部分的头部，比如，可以用实体头部来说明实体主体部分的数据类型，如Content-Type头部。
## 3.2 keepAlive 和非keepAlive区别（长连接和短连接的区别）
## HTTP/1.0 中，浏览器每次 发起 HTTP 请求都要与服务器创建一个新的 TCP 连接，服务器完成请求处理后立即断开 TCP 连接，服务器不跟踪每个客户也不记录过去的请求。然而创建和关闭连接的过程需要消耗资源和时间，为了减少资源消耗，缩短响应时间，就需要重用连接。在 HTTP/1.1 版本中默认使用持久连接，在此之前的 HTTP 版本的默认连接都是使用非持久连接，如果想要在旧版本的 HTTP 协议上维持持久连接，则需要指定 connection 的首部字段的值为 Keep-Alive 来告诉对方这个请求响应完成后不要关闭，下一次咱们还用这个请求继续交流
![2021_05_28_image.png](https://cdn.logseq.com/%2F1e5b0e5f-d368-4a5d-86eb-09a690ee15d7210b38bb-4ce4-4d09-acac-2bf75d1de4852021_05_28_image.png?Expires=4775778307&Signature=L~GHkolatru7LPISrl~6Hs2Wc5DCAQLRRzmMro7iOwKNAHrzR3NlqidbGpPakGluG3d3obIhHVvSxXPWX4mpWPUmuw92WCccGZF5JwjUERSg66Rjk-kEY7m0SYvRb6ZYnJij2l3g7PdUULhl4c760d8zm72YOAb8VMZSvRM2DeYuPKNjCioPfY4abWUWcpsEJzWsJcSl4T8M7iSpdYXXnXNiiGfCQfG5pRS5ENFbfa847yUTlC6qdc456j3mJlz9ItCl1MJsNlHMNa-NW3lYnlBoL3Fmx6vEZk--VvKYdGI8bjKCScqNIRjAcrW9zzMEn6Q5yQRayPpEtBwCXy0TeA__&Key-Pair-Id=APKAJE5CCD6X7MP6PTEA) 
对于非 Keep=Alive 来说，必须为每一个请求的对象建立和维护一个全新的连接。对于每一个这样的连接，**客户机和服务器都要分配 TCP 的缓冲区和变量，这给服务器带来的严重的负担
**；在 Keep-Alive 方式下，服务器在响应后保持该 TCP 连接打开，在同一个客户机与服务器之间的后续请求和响应报文可通过相同的连接进行传送。甚至位于同一台服务器的多个 Web 页面在从该服务器发送给同一个客户机时，可以在单个持久 TCP 连接上进行。若对 Keep-Alive 模式配置不当，将有可能比非 Keep-Alive 模式带来的损失更大。因此，我们需要正确地设置 keep-alive timeout 参数，当 TCP 连接在传送完最后一个 HTTP 响应，该连接会保持 keepalive_timeout 秒，之后就开始关闭这个链接。
## **HTTP 长连接短连接使用场景是什么**
## 长连接：多用于操作频繁，点对点的通讯，而且客户端连接数目较少的情况。例如即时通讯、网络游戏等。

短连接：用户数目较多的Web网站的 HTTP 服务一般用短连接。例如京东，淘宝这样的大型网站一般客户端数量达到千万级甚至上亿，若采用长连接势必会使得服务端大量的资源被无效占用，所以一般使用的是短连接。
